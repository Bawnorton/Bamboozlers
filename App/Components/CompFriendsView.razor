@inherits UserViewComponentBase;

@using Bamboozlers.Classes.AppDbContext
@using Bamboozlers.Classes.Services
@using Bamboozlers.Classes.Services.UserServices
@using Bamboozlers.Classes

@inject IDbContextFactory<AppDbContext> Db

<Layout>
    <LayoutHeader Fixed
                  Padding="Padding.Is3"
                  TextSize="TextSize.Heading5"
                  TextColor="TextColor.Primary"
                  Background="Background.Dark">
        <Text ElementId="header-text">Friends</Text>
    </LayoutHeader>
    <LayoutContent Padding="Padding.Is1"
                   TextColor="TextColor.Primary">
        <Tabs RenderMode="TabsRenderMode.LazyReload" SelectedTab="@selectedTab" SelectedTabChanged="@OnSelectedTabChanged">
            <Items>
                <Tab Name="All">All</Tab>
                <Tab Name="Pending">Pending</Tab>
                <Tab Name="Blocked">Blocked</Tab>
                <Tab Name="Add Friend">Add Friend</Tab>
            </Items>
            <Content>
                <TabPanel Name="All">
                    <CurrentFriends/>
                </TabPanel>
                <TabPanel Name="Pending">
                    <PendingFriendRequests/>
                </TabPanel>
                <TabPanel Name="Blocked">
                    <BlockedUsers/>
                </TabPanel>
                <TabPanel Name="Add Friend">
                    <AddFriend/>
                </TabPanel>
            </Content>
        </Tabs>
    </LayoutContent>
</Layout>

@code {
    private String selectedTab { get; set; } = "All";

    private Task OnSelectedTabChanged(string name)
    {
        selectedTab = name;
        return Task.CompletedTask;
    }
}