@inherits UserViewComponentBase

@using Bamboozlers.Classes.Data
@using Bamboozlers.Classes.AppDbContext
@using Bunit.Extensions

<Div Class="message-username" Style="display: inline-block" onclick="@(async () => await OpenProfilePopup())">
    @if (User is not null)
    {
        @(!User.DisplayName.IsNullOrEmpty() ? User.DisplayName : User.UserName)
    }
    else
    {
        <text>
            Unknown User
        </text>
    }
</Div>

@code {
    [CascadingParameter] public EventCallback ClosePopupCallback { get; set; }

    [Parameter] public User? User { get; set; }

    private async Task OpenProfilePopup()
    {
        if (User is not null)
        { 
            await PopupService.RequestKnownPopup(PopupType.UserProfile, focusUser: User);
        }
    }
}